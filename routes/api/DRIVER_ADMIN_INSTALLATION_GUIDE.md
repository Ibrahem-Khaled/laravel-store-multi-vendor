# لوحة تحكم إدارة السواقين - دليل التثبيت والاستخدام

## 📋 نظرة عامة
تم إنشاء لوحة تحكم إدارية شاملة ومتكاملة لإدارة السواقين وطلبات التوصيل في نظام Multi-Vendor Store.

## 🚀 التثبيت السريع

### 1. تشغيل المايجريشن
```bash
php artisan migrate
```

### 2. التأكد من وجود البيانات الأساسية
تأكد من وجود:
- جدول `users` مع المستخدمين
- جدول `orders` مع الطلبات
- جدول `user_addresses` مع عناوين المستخدمين

### 3. الوصول للوحة التحكم
```
/dashboard/driver-management/dashboard
```

## 🎯 المميزات الرئيسية

### 📊 لوحة التحكم الرئيسية
- إحصائيات شاملة للسواقين والطلبات
- رسوم بيانية تفاعلية للأداء الشهري
- أفضل السواقين حسب التقييم
- تنبيهات للسواقين الذين يحتاجون انتباه

### 👥 إدارة السواقين
- قائمة شاملة مع الفلترة المتقدمة
- إضافة وتعديل بيانات السواقين
- إدارة الحالة والصلاحيات
- تفاصيل الأداء والإحصائيات

### 📦 إدارة الطلبات
- قائمة الطلبات مع التفاصيل الكاملة
- إعادة تخصيص الطلبات
- تأكيد التسليم من جانب الإدارة
- إلغاء الطلبات مع تسجيل السبب

## 🖥️ الصفحات المتاحة

### 1. لوحة التحكم الرئيسية
**المسار:** `/dashboard/driver-management/dashboard`

**المميزات:**
- إحصائيات شاملة
- رسوم بيانية تفاعلية
- أفضل السواقين
- الطلبات الأخيرة
- السواقين الذين يحتاجون انتباه

### 2. قائمة السواقين
**المسار:** `/dashboard/driver-management/drivers`

**المميزات:**
- عرض جميع السواقين
- فلترة متقدمة (المدينة، الحي، نوع المركبة، الحالة)
- بحث بالاسم، البريد، رقم الرخصة
- إجراءات سريعة (عرض، تعديل، حذف)

### 3. إضافة سواق جديد
**المسار:** `/dashboard/driver-management/drivers/create`

**المميزات:**
- اختيار المستخدم من القائمة
- إدخال بيانات السواق والمركبة
- تحديد الموقع الجغرافي
- إعداد ساعات العمل
- تحديد المناطق المخدومة

### 4. تفاصيل السواق
**المسار:** `/dashboard/driver-management/drivers/{id}`

**المميزات:**
- معلومات السواق الكاملة
- إحصائيات الأداء
- مخطط الأداء الشهري
- الطلبات الأخيرة
- إدارة الحالة والإعدادات

### 5. إدارة الطلبات
**المسار:** `/dashboard/driver-management/orders`

**المميزات:**
- قائمة الطلبات مع التفاصيل
- فلترة متقدمة حسب جميع المعايير
- إعادة تخصيص الطلبات
- تأكيد التسليم
- إلغاء الطلبات

### 6. تفاصيل الطلب
**المسار:** `/dashboard/driver-management/orders/{id}`

**المميزات:**
- معلومات الطلب الكاملة
- بيانات العميل والسواق
- منتجات الطلب مع الأسعار
- سجل الطلب الكامل
- حالة التأكيد المزدوج

## 🔧 الإعدادات المطلوبة

### 1. تحديث ملف الترجمة
تأكد من وجود ملف الترجمة:
```php
// resources/lang/ar/driver.php
return [
    'status' => [
        'assigned' => 'مخصص',
        'accepted' => 'مقبول',
        'picked_up' => 'تم الاستلام',
        'delivered' => 'تم التسليم',
        'cancelled' => 'ملغي',
    ],
    // ... باقي الترجمات
];
```

### 2. تحديث الشريط الجانبي
تم إضافة قسم "إدارة السواقين" إلى الشريط الجانبي الرئيسي مع الروابط التالية:
- لوحة التحكم
- قائمة السواقين
- إدارة الطلبات
- إضافة سواق

### 3. ملفات CSS المخصصة
تم إنشاء ملف CSS مخصص:
```css
/* public/assets/css/driver-management.css */
```

## 📊 قاعدة البيانات

### الجداول المطلوبة:
1. **drivers** - بيانات السواقين
2. **driver_orders** - ربط الطلبات بالسواقين
3. **users** - المستخدمين (موجود مسبقاً)
4. **orders** - الطلبات (موجود مسبقاً)
5. **user_addresses** - عناوين المستخدمين (موجود مسبقاً)

### العلاقات:
- `Driver` belongsTo `User`
- `Driver` hasMany `DriverOrder`
- `DriverOrder` belongsTo `Order`
- `DriverOrder` belongsTo `Driver`

## 🎨 التصميم والواجهة

### الألوان:
- **الأساسي:** تدرج أزرق-بنفسجي (`#667eea` إلى `#764ba2`)
- **النجاح:** أخضر (`#28a745`)
- **التحذير:** أصفر (`#ffc107`)
- **الخطر:** أحمر (`#dc3545`)

### المكونات:
- Cards مع ظلال ناعمة
- جداول تفاعلية
- رسوم بيانية باستخدام Chart.js
- نوافذ منبثقة للإجراءات المهمة

## 🔒 الأمان

### الحماية:
- حماية من الوصول غير المصرح
- تأكيدات للإجراءات الخطيرة
- تسجيل جميع العمليات

### نظام التأكيد المزدوج:
- تأكيد السواق
- تأكيد العميل
- تأكيد الإدارة

## 📱 الاستجابة

### التصميم المتجاوب:
- يعمل على جميع الأجهزة
- تخطيط مرن يتكيف مع حجم الشاشة
- قوائم منسدلة للفلترة على الشاشات الصغيرة

## 🚀 المميزات المتقدمة

### التحديث الفوري:
- تحديث تلقائي للإحصائيات
- إشعارات فورية للطلبات الجديدة
- تحديث حالة السواقين في الوقت الفعلي

### التصدير والطباعة:
- تصدير قوائم السواقين
- تصدير تقارير الطلبات
- طباعة تفاصيل الطلبات

## 🛠️ استكشاف الأخطاء

### المشاكل الشائعة:

1. **خطأ في المسارات:**
   - تأكد من وجود المسارات في `routes/web.php`
   - تأكد من تسجيل Controller في المسارات

2. **خطأ في قاعدة البيانات:**
   - تأكد من تشغيل المايجريشن
   - تأكد من وجود الجداول المطلوبة

3. **خطأ في الترجمة:**
   - تأكد من وجود ملف الترجمة
   - تأكد من استخدام `__('driver.status.assigned')`

4. **خطأ في CSS:**
   - تأكد من وجود ملف CSS في المسار الصحيح
   - تأكد من تحميل الملف في layout

## 📞 الدعم

### للمساعدة:
- راجع ملف التوثيق الشامل
- تحقق من ملفات المثال
- راجع سجل الأخطاء

### التطويرات المستقبلية:
- نظام إشعارات متقدم
- تطبيق جوال للمشرفين
- تحليلات ذكية باستخدام AI
- تكامل مع خرائط GPS

---

**تم إنشاء هذه اللوحة لتكون شاملة ومتكاملة، وتوفر جميع الأدوات اللازمة لإدارة فعالة للسواقين وطلبات التوصيل في النظام.**
